<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Invoice {{Invoice.Data.InvoiceNumber}}</title>
    <style>
        /* General styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
        }

        .currency {
            text-align: right;
        }

        th, td {
            vertical-align: top;
        }

        h1, h2, h3, .my-card-header {
            color: darkblue;
            font-weight: bold;
        }

        .my-card-header {
            border-bottom: 1px solid #ddd;
            background: #eee;
        }

            .my-card-header .moreInfo {
                text-align: right;
                color: #999;
                display: inline-block;
                font-size: 80%;
            }

        .card {
            font-size: 90%;
        }

        .table {
            font-size: 80%;
        }

        .number {
            text-align: right;
        }

        h1 {
            font-size: 110%;
            font-weight: bold;
        }

        .smalltext {
            font-size: 70%
        }

        .important {
            font-size: 100%;
            font-weight: bold
        }

        .lastItem {
            text-align: right
        }

        .middle {
            text-align: center;
        }

        .signature {
            position: absolute;
            bottom: 0;
            right: 0;
        }

        h1 a {
            text-decoration: none;
            color: darkblue
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
    <div class="container-fluid">

        <h1 class="m-2 p-0">
            Invoice
            {{#if Link}}
            <a href="{{Link}}">{{Invoice.Data.InvoiceNumber}}</a>
            {{else}}
            {{Invoice.Data.InvoiceNumber}}
            {{/if}}
        </h1>
        <div class="row">
            {{#if Issuer}}
            <div class="col p-1">
                <div class="card mr-2 mb-2">
                    <div class="card-body p-0">
                        <div class="my-card-header p-1">
                            Supplier
                        </div>
                        <div class="p-1">
                            {{#if Issuer.Data.BusinessName}}
                            <div>{{Issuer.Data.BusinessName}}</div>
                            {{/if}}
                            <div class="row">
                                <div class="col smalltext">

                                    {{#if Issuer.Data.LastName}}
                                    <div><b>{{Issuer.Data.FirstName}} {{Issuer.Data.LastName}}</b></div>
                                    {{/if}}

                                    {{#if IssuerAddress.Data.Street}}
                                    <div>{{IssuerAddress.Data.Street}}</div>
                                    {{/if}}
                                    {{#if IssuerAddress.Data.StreetLine2}}
                                    <div>{{IssuerAddress.Data.StreetLine2}}</div>
                                    {{/if}}
                                    {{#if IssuerAddress.Data.City}}
                                    <div>{{IssuerAddress.Data.ZipCode}} {{IssuerAddress.Data.City}}</div>
                                    {{/if}}
                                    {{#if IssuerAddress.Data.State}}
                                    <div>{{IssuerAddress.Data.State}}</div>
                                    {{/if}}
                                    {{#if IssuerAddress.Data.Country}}
                                    <div>{{IssuerAddress.Data.Country}} {{#if IssuerAddress.Data.CountryCode}}({{IssuerAddress.Data.CountryCode}}){{/if}}</div>
                                    {{/if}}
                                </div>
                                <div class="col smalltext">
                                    <table>
                                        {{#if Issuer.Data.CompanyId}}
                                        <tr><td>Company&nbsp;ID:</td><td>{{Issuer.Data.CompanyId}}</td></tr>
                                        {{/if}}
                                        {{#if Issuer.Data.CompanyTaxId}}
                                        <tr><td>Tax&nbsp;ID:</td><td>{{Issuer.Data.CompanyTaxId}}</td></tr>
                                        {{/if}}
                                        {{#if Issuer.Data.CompanyVATId}}
                                        <tr><td>VAT&nbsp;ID:</td><td>{{Issuer.Data.CompanyVATId}}</td></tr>
                                        {{/if}}
                                        {{#if Issuer.Data.Email}}
                                        <tr><td>Email:</td><td>{{Issuer.Data.Email}}</td></tr>
                                        {{/if}}
                                        {{#if Issuer.Data.Phone}}
                                        <tr><td>Phone:</td><td>{{Issuer.Data.Phone}}</td></tr>
                                        {{/if}}
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/if}}
            {{#if Receiver}}
            <div class="col  p-1">

                <div class="card  mr-2 mb-2">
                    <div class="card-body  p-0">
                        <div class="my-card-header p-1">
                            Billed to client
                        </div>
                        <div class="p-1">
                            {{#if Receiver.Data.BusinessName}}
                            <div>{{Receiver.Data.BusinessName}}</div>
                            {{/if}}
                            <div class="row">
                                <div class="col smalltext">

                                    {{#if Receiver.Data.LastName}}
                                    <div><b>{{Receiver.Data.FirstName}} {{Receiver.Data.LastName}}</b></div>
                                    {{/if}}

                                    {{#if ReceiverAddress.Data.Street}}
                                    <div>{{ReceiverAddress.Data.Street}}</div>
                                    {{/if}}
                                    {{#if ReceiverAddress.Data.StreetLine2}}
                                    <div>{{ReceiverAddress.Data.StreetLine2}}</div>
                                    {{/if}}
                                    {{#if ReceiverAddress.Data.City}}
                                    <div>{{ReceiverAddress.Data.ZipCode}} {{ReceiverAddress.Data.City}}</div>
                                    {{/if}}
                                    {{#if ReceiverAddress.Data.State}}
                                    <div>{{ReceiverAddress.Data.State}}</div>
                                    {{/if}}
                                    {{#if ReceiverAddress.Data.Country}}
                                    <div>{{ReceiverAddress.Data.Country}} {{#if ReceiverAddress.Data.CountryCode}}({{ReceiverAddress.Data.CountryCode}}){{/if}}</div>
                                    {{/if}}
                                </div>
                                <div class="col smalltext">
                                    <table>
                                        {{#if Receiver.Data.CompanyId}}
                                        <tr><td>Company&nbsp;ID:</td><td>{{Receiver.Data.CompanyId}}</td></tr>
                                        {{/if}}
                                        {{#if Receiver.Data.CompanyTaxId}}
                                        <tr><td>Tax&nbsp;ID:</td><td>{{Receiver.Data.CompanyTaxId}}</td></tr>
                                        {{/if}}
                                        {{#if Receiver.Data.CompanyVATId}}
                                        <tr><td>VAT&nbsp;ID:</td><td>{{Receiver.Data.CompanyVATId}}</td></tr>
                                        {{/if}}
                                        {{#if Receiver.Data.Email}}
                                        <tr><td>Email:</td><td>{{Receiver.Data.Email}}</td></tr>
                                        {{/if}}
                                        {{#if Receiver.Data.Phone}}
                                        <tr><td>Phone:</td><td>{{Receiver.Data.Phone}}</td></tr>
                                        {{/if}}
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/if}}
            <div class="col p-1">

                <div class="card mb-2">
                    <div class="card-body p-0">
                        <div class="my-card-header p-1">
                            Invoice details
                        </div>
                        <div class="p-1 smalltext">

                            {{#if Link}}
                            <a class="btn btn-primary btn-xs my-1 py-0 px-2 float-end" href="{{Link}}">Check status</a>
                            {{/if}}

                            {{#if Invoice.Data.InvoiceNumber}}
                            <div>Number: {{Invoice.Data.InvoiceNumber}}</div>
                            {{/if}}

                            {{#if Invoice.Data.DateIssue}}
                            <div>
                                Issued on: {{dateFormat "dd/MM/yyyy" Invoice.Data.DateIssue}}
                            </div>
                            {{/if}}

                            {{#if Invoice.Data.DateDue}}
                            <div>Payment due: {{dateFormat "dd/MM/yyyy" Invoice.Data.DateDue}}</div>
                            {{/if}}

                            {{#if Invoice.Data.DateDelivery}}
                            <div>Delivery date: {{dateFormat "dd/MM/yyyy" Invoice.Data.DateDelivery}}</div>
                            {{/if}}

                            {{#if Invoice.Data.Currency}}
                            <div>Invoice currency: {{Invoice.Data.Currency}}</div>
                            {{/if}}

                            {{#if PayQR}}
                            <div><img src="{{PayQR}}" width="200" height="200" /></div>
                            {{/if}}

                            {{#if Invoice.Id}}
                            <div>
                                UUID: {{Invoice.Id}}
                            </div>
                            {{/if}}

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">

            <div class="col p-1">

                <div class="card mb-2">
                    <div class="card-body  p-0">
                        <div class="my-card-header p-1">
                            <div class="row">
                                <div class="col">
                                    Expected payment method
                                </div>
                                {{#if HasManyPaymentMethods}}
                                <div class="col moreInfo">
                                    Please pay to one of the following payment methods
                                </div>
                                {{/if}}
                            </div>
                        </div>

                        <table class="m-0 p-0 bg-primary text-light" style="width:100%">
                            <tr>
                                <td class="p-2">Account</td>
                                <td class="middle p-2">Payment reference</td>
                                <td class="middle p-2">Due date</td>
                                <td class="lastItem p-2">Total price</td>
                            </tr>
                            {{#each Invoice.Data.PaymentMethods}}
                            <tr>
                                <td class="important p-2">{{this.Account}} / {{this.Network}}</td>
                                <td class="important middle p-2">{{../Invoice.Data.InvoiceNumber}}</td>
                                <td class="important middle p-2">{{dateFormat "dd/MM/yyyy" ../Invoice.Data.DateDue}}</td>
                                <td class="important lastItem p-2">

                                    {{numberFormat "N2" this.GrossAmount}} {{this.Currency}}
                                    {{#if this.CurrencyId}}
                                    ({{this.CurrencyId}})
                                    {{/if}}

                                </td>
                            </tr>
                            {{/each}}
                        </table>

                    </div>

                </div>

            </div>
        </div>
        <table style="width:100%">
            {{#if Invoice.Data.NoteBeforeItems}}
            <tr><td colspan="2">{{Invoice.Data.NoteBeforeItems}}</td></tr>
            {{/if}}
            <tr>
                <td colspan="2">
                    <table width="100%" class="items table">

                        <tr>
                            <th>Description</th>
                            <th class="number">Qty</th>
                            <th class="number">Unit price</th>
                            {{#if hasDiscount}}
                            <th class="number">Discount</th>
                            {{/if}}
                            <th class="number">Tax</th>
                            <th class="number">Net Amount</th>
                            <th class="number">Gross Amount</th>
                        </tr>
                        {{#each Items.Results}}
                        <tr
                            <td>{{this.Data.ItemText}}</td>
                            <td class="number">{{this.Data.Quantity}} {{this.Data.Unit}}</td>
                            <td class="number">{{numberFormat "N2" this.Data.UnitPrice}} {{../Invoice.Data.Currency}}/{{this.Data.Unit}}</td>
                            {{#if this.Data.Discount}}<td class="number">{{this.Data.Discount}} %</td>{{/if}}
                            <td class="number">{{this.Data.TaxPercent}} %</td>
                            <td class="number">{{numberFormat "N2" this.Data.NetAmount}} {{../Invoice.Data.Currency}}</td>
                            <td class="number">{{numberFormat "N2" this.Data.GrossAmount}} {{../Invoice.Data.Currency}}</td>
                        </tr>
                        {{/each}}
                    </table>
                </td>
            </tr>
        </table>
        <div class="row">
            <div class="col p-1">

                <div class="card mb-2  ">
                    <div class="card-body  p-0">
                        <div class="my-card-header p-1">
                            Summary
                        </div>

                        <table class="table table-striped  m-0 p-0 smalltext">
                            <tr>
                                <th>Currency</th>
                                {{#each Invoice.Data.Summary}}
                                <th class="number">{{Currency}}</th>
                                {{/each}}
                            </tr>
                            {{#if HasAnyRate}}
                            <tr>
                                <th>Rate</th>
                                {{#each Invoice.Data.Summary}}
                                <td class="number">
                                    {{#if RateCurrencies}}
                                    {{numberFormat "N8" Rate}} {{RateCurrencies}}
                                    {{/if}}
                                </td>
                                {{/each}}
                            </tr>
                            {{/if}}
                            <tr>
                                <th>Net amount</th>
                                {{#each Invoice.Data.Summary}}
                                <td class="number">{{numberFormat "N2" NetAmount}} {{Currency}}</td>
                                {{/each}}
                            </tr>
                            <tr>
                                <th>Tax amount</th>
                                {{#each Invoice.Data.Summary}}
                                <td class="number">{{numberFormat "N2" TaxAmount}} {{Currency}}</td>
                                {{/each}}
                            </tr>
                            <tr>
                                <th>Gross amount</th>
                                {{#each Invoice.Data.Summary}}
                                <td class="number">{{numberFormat "N2" GrossAmount}} {{Currency}}</td>
                                {{/each}}
                            </tr>
                        </table>


                    </div>
                </div>
            </div>

            <div class="col p-1">
                {{#if Invoice.Data.NoteAfterItems}}
                <h2 class="smalltext">Notes</h2>
                <p class="smalltext">
                    {{Invoice.Data.NoteAfterItems}}
                </p>
                {{/if}}

                {{#if HasAnyRateNotes}}
                <h2 class="smalltext">Summary Notes</h2>
                {{#each Invoice.Data.Summary}}
                <div class="smalltext">
                    {{#if RateNote}}
                    {{RateCurrencies}} - {{RateNote}}
                    {{/if}}
                </div>
                {{/each}}
                {{/if}}
                {{#if Issuer.Data.SignatureUrl}}
                <img class="signature" src="{{Issuer.Data.SignatureUrl}}" width="100" />
                {{/if}}

            </div>
        </div>


    </div>
</body>
</html>